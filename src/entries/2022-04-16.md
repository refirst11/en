---
title: Application quality of keep with linter and formatter
subtitle: Enhance code consistency, readability, and performance with husky lint-staged ESLint StyleLint
date: '2022-04-16'
---

I wrote this in order to avoid stumbling at the beginning and make the process smoother.

[husky - npm](https://www.npmjs.com/package/husky)
[typicode / husky](https://github.com/typicode/husky)

```bash title="terminal/cmd"
npm install --save-dev husky
npm set-script prepare "husky install"
npm run prepare
```

"set-script" adds "husky install" to the script in package.json, and creates a ".husky" folder at the root in "run prepare".

Next, create the "pre-commit.sh" file.

```bash title="terminal/cmd"
npx husky add .husky/pre-commit "npm run lint-staged"
git add .husky/pre-commit
```

If you proceed according to the GitHub Usage, files such as the following will be generated in the .husky folder and its sub folders:

```shell title="pre-commit.shell"
pre-commit.shell
#!/bin/sh
. "$(dirname "$0")/\_/husky.sh"

npm run lint-staged
```

Initially, it is set to "npm run test", but it will be rewritten here to trigger "staged".

```bash title="terminal/cmd"
npm install lint-staged
```

Write each lint triggered by lint-staged at the bottom of package.json (anywhere except for scripts).

```json title="package.json"
  "scripts": {
    "lint-staged": "lint-staged",
    "prepare": "husky install"
  },
"lint-staged": {
    "*.{js,ts,jsx,tsx}": "eslint --fix",
    "*.{css,scss}": "stylelint --fix"
}
```

I omitted prettier this time because it runs on save. Actually, I tried it, but since prettier is executed on all files, only lint-related tasks seem to be executed at commit time with lint-staged.

As a test, when committing a description that violates the syntax of lint, it returns an error correctly. The GUI of VSC also throws an error.

Nowadays since ESLint is included in the create command, let's create the settings for Stylelint.

```json title=".stylelintrc.json"
{
  "plugins": ["stylelint-scss"],
  "extends": ["stylelint-config-recommended-scss", "stylelint-config-prettier"],

  "rules": {
    "color-named": null,
    "selector-class-pattern": null,
    "no-descending-specificity": null
  }
}
```

Here's an example of stylelint configuration. Since you need to spend some time setting rules, I think it's completely a matter of preference for small projects.

If you assign null to the error on the right side of stylelint error, you can ignore it.

stylelint-scss, stylelint-config-prettier, stylelint-config-recommended-scss, and stylelint-config-standard-scss are necessary for stylelint. From top to bottom: stylelint itself, necessary when used in combination with prettier like eslint, standard seems to have stricter rules than recommended. By the way, it seems that you can apply both at the same time.

Whether or not stylelint is necessary may depend on the scale.

Finally, we'll configure Prettier to run on save.
First, install the [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) VSCode plugin.
Create a .vscode folder at the root of your project and add the following to settings.json.

```json
{
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true
}
```

Create a .prettierrc file at the root of your project to configure options such as the line width.

```json
{
  "printWidth": 120,
  "singleQuote": true,
  "semi": true
}
```

That's it for configuring husky, lint-staged, and Prettier!
feel free to add additional configurations such as commitlint based on your preferences!
